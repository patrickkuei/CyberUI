import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./iframe-3mg8uO-U.js";import{r as P}from"./index-lhxX6Ztu.js";import{B as E}from"./Button-Bcf2d3yA.js";const U={openDuration:600,closeDuration:400,crtEffects:!0},_={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",fullscreen:"max-w-none w-full h-full"},F=t.memo(({isOpen:n,onClose:p,title:c,children:C,footer:u,onCancel:i,onConfirm:d,cancelText:N="Cancel",confirmText:M="Confirm",confirmLoading:D=!1,showCancel:L=!0,showConfirm:$=!0,size:x="md",closeOnOverlayClick:y=!0,closeOnEscape:b=!0,animation:h,className:g="",overlayClassName:S="",showCloseButton:I=!0,onOpen:w,onCRTBootComplete:v})=>{const s=t.useMemo(()=>({...U,...h}),[h]),[l,k]=t.useState(!1),[r,m]=t.useState(!0),j=t.useRef(null),R=t.useRef(null),a=t.useCallback(()=>{k(!0),setTimeout(()=>{k(!1),m(!0),p()},s.closeDuration)},[p,s.closeDuration]);t.useEffect(()=>{n&&!l&&(m(!0),w?.(),setTimeout(()=>{m(!1),v?.()},s.openDuration))},[n,l,w,v,s.openDuration]);const A=t.useCallback(()=>{i?.(),a()},[i,a]),T=t.useCallback(()=>{d?.(),a()},[d,a]),W=t.useCallback(o=>{y&&(o.target===j.current||o.target===o.currentTarget)&&a()},[a,y]),f=t.useCallback(o=>{b&&o.key==="Escape"&&a()},[a,b]);t.useEffect(()=>{if(n){document.addEventListener("keydown",f);const o=document.body.style.overflow,B=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.paddingRight=`${B}px`,()=>{document.removeEventListener("keydown",f),document.body.style.overflow=o,document.body.style.paddingRight=""}}},[n,f]);const z=t.useMemo(()=>["relative","bg-surface","border-2","rounded-lg","max-h-[90vh]","overflow-hidden","flex","flex-col","transform","transition-all","duration-300",_[x],s.crtEffects&&r?"animate-crt-power-on border-accent shadow-lg-accent":s.crtEffects&&l?"animate-crt-power-off border-accent shadow-lg-accent":l?"scale-95 opacity-0 border-accent/20":r?"scale-105 opacity-90 border-accent shadow-input-accent/50":"scale-100 opacity-100 animate-rgb-glow",g].filter(Boolean).join(" "),[x,s.crtEffects,l,r,g]);return n?P.createPortal(e.jsx("div",{ref:j,className:`fixed z-50 flex items-center justify-center p-4 transition-all ease-out ${S} ${l?"bg-black/0 backdrop-blur-none opacity-0 duration-800":r?"bg-black/30 backdrop-blur-md opacity-100 duration-500":"bg-black/30 backdrop-blur-sm opacity-100 duration-300"}`,style:{top:0,left:0,width:"100vw",height:"100vh"},onClick:W,role:"dialog","aria-modal":"true","aria-label":c?`Modal: ${c}`:"Modal dialog",children:e.jsxs("div",{ref:R,className:z,onClick:o=>o.stopPropagation(),children:[I&&e.jsx("button",{onClick:a,className:`absolute top-4 right-4 text-muted hover:text-accent transition-all duration-300 z-20 rounded-full w-8 h-8 flex items-center justify-center cursor-pointer transform ${l?"scale-0 rotate-180 opacity-0":r?"scale-0 opacity-0":"scale-100 opacity-100 hover:scale-110 hover:bg-accent/10"}`,"aria-label":"Close modal",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",className:"relative",children:e.jsx("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),c&&e.jsx("div",{className:`px-6 py-4 border-b border-accent/20 flex-shrink-0 transition-all duration-300 ${r?"opacity-0 translate-y-2":"opacity-100 translate-y-0"}`,children:e.jsx("h2",{className:"text-lg font-semibold text-primary",children:c})}),e.jsx("div",{className:`flex-1 overflow-auto p-6 transition-all duration-500 ${r?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:C}),(u||i||d)&&e.jsx("div",{className:`px-6 py-4 border-t border-accent/20 flex-shrink-0 transition-all duration-300 ${r?"opacity-0 translate-y-2":"opacity-100 translate-y-0"}`,children:u||e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted text-sm font-mono",children:"> ESC to abort"}),e.jsxs("div",{className:"flex gap-3",children:[L&&i&&e.jsx(E,{variant:"ghost",size:"sm",onClick:A,children:N}),$&&d&&e.jsx(E,{variant:"primary",size:"sm",onClick:T,disabled:D,children:M})]})]})})]})}),document.body):null});F.displayName="CyberUI.Modal";export{F as M};
